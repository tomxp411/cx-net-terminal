
; 64tass Turbo Assembler Macro V1.59.3120 listing file
; 64tass -o ANSI.PRG --list ANSI.LST --cbm-prg ANSI.ASM
; Mon Apr 29 16:59:56 2024

;Offset	;Hex		;Monitor	;Source

;******  Processing input file: ANSI.ASM


;******  Processing file: KERNAL.ASM

=$ffe4					getin = $ffe4
=$ff62					screen_set_charset = $ff62
=$ff47					enter_basic = $ff47

;******  Return to file: ANSI.ASM

>0801	0b 08 0a 00 ce 90 3a 9e		.byte $0B,$08,$0A,$00,$CE,$90,$3A,$9E,$24,$38,$31,$30,$00,$00,$00
>0809	24 38 31 30 00 00 00
.0810					main:
.0810	20 ef 11	jsr $11ef	    jsr ansi_init
.0813					test_start:
.0813	a9 01		lda #$01	    lda #$01
.0815	8d a8 14	sta $14a8	    sta cur_color
.0818	a9 76		lda #$76	    lda #<str_test
.081a	85 02		sta $02		    sta R0
.081c	a9 0a		lda #$0a	    lda #>str_test
.081e	85 03		sta $03		    sta R0+1
.0820					print_loop:
.0820	b2 02		lda ($02)	    lda (R0)
.0822	c9 01		cmp #$01	    cmp #$01
.0824	d0 03		bne $0829	    bne +
.0826	20 37 08	jsr $0837	    jsr draw_test
.0829	c9 1a		cmp #$1a	+   cmp #26 ; end of file marker
.082b	f0 28		beq $0855	    beq done
.082d					wait_for_key:
.082d	20 48 12	jsr $1248	    jsr ansi_print_str
.0830	20 e4 ff	jsr $ffe4	-   jsr getin
.0833	f0 fb		beq $0830	    beq -
.0835	80 e9		bra $0820	    bra print_loop
.0837					draw_test:
.0837	a5 02		lda $02		    lda R0L
.0839	48		pha		    pha
.083a	a5 03		lda $03		    lda R0H
.083c	48		pha		    pha
.083d	a9 75		lda #$75	    lda #<test_grid
.083f	85 02		sta $02		    sta R0L
.0841	a9 08		lda #$08	    lda #>test_grid
.0843	85 03		sta $03		    sta R0H
.0845	20 48 12	jsr $1248	    jsr ansi_print_str
.0848	68		pla		    pla
.0849	85 03		sta $03		    sta R0H
.084b	68		pla		    pla
.084c	85 02		sta $02		    sta R0L
.084e	e6 02		inc $02		    inc R0L
.0850	d0 02		bne $0854	    bne +
.0852	e6 03		inc $03		    inc R0H
.0854	60		rts		+   rts
.0855					done:
.0855	a9 61		lda #$61	    lda #$61        ; reset the screen to blue
.0857	8d a8 14	sta $14a8	    sta cur_color
.085a	20 e5 13	jsr $13e5	    jsr ansi_cls
.085d	4c 13 08	jmp $0813	    jmp test_start
.0860	00		brk #		    brk
>0861	00 00 00 00			.byte 0,0,0,0
.0865					press_key_text:
>0865	5b 50 72 65 73 73 20 41		    .text "[Press Any Key]",0
>086d	6e 79 20 4b 65 79 5d 00
.0875					test_grid:
>0875	1b 5b 32 4a			    .text 27,"[2J"
>0879	1b 5b 32 48			    .text 27,"[2H"
>087d	2e 2e 2e 2e 2c 2e 2e 2e		    .text "....,....1....,....2....,....3....,....4....,....5....,....6....,....7....,....8"
>0885	2e 31 2e 2e 2e 2e 2c 2e 2e 2e 2e 32 2e 2e 2e 2e
>0895	2c 2e 2e 2e 2e 33 2e 2e 2e 2e 2c 2e 2e 2e 2e 34
>08a5	2e 2e 2e 2e 2c 2e 2e 2e 2e 35 2e 2e 2e 2e 2c 2e
>08b5	2e 2e 2e 36 2e 2e 2e 2e 2c 2e 2e 2e 2e 37 2e 2e
>08c5	2e 2e 2c 2e 2e 2e 2e 38
>08cd	1b 5b 31 39 48			    .text 27,"[19H"
>08d2	2e 2e 2e 2e 2c 2e 2e 2e		    .text "....,....1....,....2....,....3....,....4....,....5....,....6....,....7....,....8"
>08da	2e 31 2e 2e 2e 2e 2c 2e 2e 2e 2e 32 2e 2e 2e 2e
>08ea	2c 2e 2e 2e 2e 33 2e 2e 2e 2e 2c 2e 2e 2e 2e 34
>08fa	2e 2e 2e 2e 2c 2e 2e 2e 2e 35 2e 2e 2e 2e 2c 2e
>090a	2e 2e 2e 36 2e 2e 2e 2e 2c 2e 2e 2e 2e 37 2e 2e
>091a	2e 2e 2c 2e 2e 2e 2e 38
>0922	1b 5b 32 31 48			    .text 27,"[21H"
>0927	2e 2e 2e 2e 2c 2e 2e 2e		    .text "....,....1....,....2....,....3....,....4....,....5....,....6....,....7....,....8"
>092f	2e 31 2e 2e 2e 2e 2c 2e 2e 2e 2e 32 2e 2e 2e 2e
>093f	2c 2e 2e 2e 2e 33 2e 2e 2e 2e 2c 2e 2e 2e 2e 34
>094f	2e 2e 2e 2e 2c 2e 2e 2e 2e 35 2e 2e 2e 2e 2c 2e
>095f	2e 2e 2e 36 2e 2e 2e 2e 2c 2e 2e 2e 2e 37 2e 2e
>096f	2e 2e 2c 2e 2e 2e 2e 38
>0977	1b 5b 36 30 3b 37 30 48		    .text 27,"[60;70H"
>097f	37 2e 2e 2e 2e 2c 2e 2e		    .text "7....,....8"
>0987	2e 2e 38
>098a	1b 5b 48			    .text 27,"[H"
>098d	31 0d 0a 32 0d 0a 33 0d		    .text "1", $0d,$0a,"2", $0d,$0a,"3", $0d,$0a,"4", $0d,$0a,"5", $0d,$0a
>0995	0a 34 0d 0a 35 0d 0a
>099c	36 0d 0a 37 0d 0a 38 0d		    .text "6", $0d,$0a,"7", $0d,$0a,"8", $0d,$0a,"9", $0d,$0a,"10",$0d,$0a
>09a4	0a 39 0d 0a 31 30 0d 0a
>09ac	31 31 0d 0a 31 32 0d 0a		    .text "11",$0d,$0a,"12",$0d,$0a,"13",$0d,$0a,"14",$0d,$0a,"15",$0d,$0a
>09b4	31 33 0d 0a 31 34 0d 0a 31 35 0d 0a
>09c0	31 36 0d 0a 31 37 0d 0a		    .text "16",$0d,$0a,"17",$0d,$0a,"18",$0d,$0a,"19",$0d,$0a,"20",$0d,$0a
>09c8	31 38 0d 0a 31 39 0d 0a 32 30 0d 0a
>09d4	32 31 0d 0a 32 32 0d 0a		    .text "21",$0d,$0a,"22",$0d,$0a,"23",$0d,$0a,"24",$0d,$0a,"25",$0d,$0a
>09dc	32 33 0d 0a 32 34 0d 0a 32 35 0d 0a
>09e8	32 36 0d 0a 32 37 0d 0a		    .text "26",$0d,$0a,"27",$0d,$0a,"28",$0d,$0a,"29",$0d,$0a,"30",$0d,$0a
>09f0	32 38 0d 0a 32 39 0d 0a 33 30 0d 0a
>09fc	33 31 0d 0a 33 32 0d 0a		    .text "31",$0d,$0a,"32",$0d,$0a,"33",$0d,$0a,"34",$0d,$0a,"35",$0d,$0a
>0a04	33 33 0d 0a 33 34 0d 0a 33 35 0d 0a
>0a10	33 36 0d 0a 33 37 0d 0a		    .text "36",$0d,$0a,"37",$0d,$0a,"38",$0d,$0a,"39",$0d,$0a,"40",$0d,$0a
>0a18	33 38 0d 0a 33 39 0d 0a 34 30 0d 0a
>0a24	34 31 0d 0a 34 32 0d 0a		    .text "41",$0d,$0a,"42",$0d,$0a,"43",$0d,$0a,"44",$0d,$0a,"45",$0d,$0a
>0a2c	34 33 0d 0a 34 34 0d 0a 34 35 0d 0a
>0a38	34 36 0d 0a 34 37 0d 0a		    .text "46",$0d,$0a,"47",$0d,$0a,"48",$0d,$0a,"49",$0d,$0a,"50",$0d,$0a
>0a40	34 38 0d 0a 34 39 0d 0a 35 30 0d 0a
>0a4c	35 31 0d 0a 35 32 0d 0a		    .text "51",$0d,$0a,"52",$0d,$0a,"53",$0d,$0a,"54",$0d,$0a,"55",$0d,$0a
>0a54	35 33 0d 0a 35 34 0d 0a 35 35 0d 0a
>0a60	35 36 0d 0a 35 37 0d 0a		    .text "56",$0d,$0a,"57",$0d,$0a,"58",$0d,$0a,"59",$0d,$0a,"60"
>0a68	35 38 0d 0a 35 39 0d 0a 36 30
>0a72	1b 5b 48			    .text 27,"[H"
>0a75	00				    .byte 0
.0a76					str_test:
>0a76	1b 5b 32 4a 1b 5b 48		    .text 27,"[2J",27,"[H"
>0a7d	1b 5b 32 3b 34 48		    .text 27,"[2;4H"
>0a83	41 4e 53 49 20 43 6f 6e		    .text "ANSI Control and Escape Code Demo",$0d,$0a,$0a,$0a
>0a8b	74 72 6f 6c 20 61 6e 64 20 45 73 63 61 70 65 20
>0a9b	43 6f 64 65 20 44 65 6d 6f 0d 0a 0a 0a
>0aa8	54 68 69 73 20 77 69 6c		    .text "This will run several test sequences.",$0d,$0a
>0ab0	6c 20 72 75 6e 20 73 65 76 65 72 61 6c 20 74 65
>0ac0	73 74 20 73 65 71 75 65 6e 63 65 73 2e 0d 0a
>0acf	41 66 74 65 72 20 65 61		    .text "After each sequence, the test will pause.",$0d,$0a
>0ad7	63 68 20 73 65 71 75 65 6e 63 65 2c 20 74 68 65
>0ae7	20 74 65 73 74 20 77 69 6c 6c 20 70 61 75 73 65
>0af7	2e 0d 0a
>0afa	54 65 78 74 20 6f 6e 20		    .text "Text on the screen should tell you how",$0d,$0a
>0b02	74 68 65 20 73 63 72 65 65 6e 20 73 68 6f 75 6c
>0b12	64 20 74 65 6c 6c 20 79 6f 75 20 68 6f 77 0d 0a
>0b22	74 6f 20 69 6e 74 65 72		    .text "to interpret each test.",$0d,$0a,$0a
>0b2a	70 72 65 74 20 65 61 63 68 20 74 65 73 74 2e 0d
>0b3a	0a 0a
>0b3c	46 6f 72 20 65 78 61 6d		    .text "For example:",$0d,$0a
>0b44	70 6c 65 3a 0d 0a
>0b4a	2e 2e 2e 2e 2c 2e 2e 2e		    .text "....,....1....,....2",$0d,$0a
>0b52	2e 31 2e 2e 2e 2e 2c 2e 2e 2e 2e 32 0d 0a
>0b60	20 20 20 20 78 20 5b 78		    .text "    x [x is on column 5]",$0d,$0a
>0b68	20 69 73 20 6f 6e 20 63 6f 6c 75 6d 6e 20 35 5d
>0b78	0d 0a
>0b7a	0d 0a				    .text $0d,$0a
>0b7c	49 66 20 74 68 65 20 78		    .text "If the x is on column 5, then the test passes.",$0d,$0a
>0b84	20 69 73 20 6f 6e 20 63 6f 6c 75 6d 6e 20 35 2c
>0b94	20 74 68 65 6e 20 74 68 65 20 74 65 73 74 20 70
>0ba4	61 73 73 65 73 2e 0d 0a
>0bac	0a 0a				    .byte 10,$0a
>0bae	41 66 74 65 72 20 63 6f		    .text "After confirming each test, press a key",$0d,$0a
>0bb6	6e 66 69 72 6d 69 6e 67 20 65 61 63 68 20 74 65
>0bc6	73 74 2c 20 70 72 65 73 73 20 61 20 6b 65 79 0d
>0bd6	0a
>0bd7	66 6f 72 20 74 68 65 20		    .text "for the next test.",$0d,$0a
>0bdf	6e 65 78 74 20 74 65 73 74 2e 0d 0a
>0beb	0a 0a				    .text $0a,$0a
>0bed	5b 50 72 65 73 73 20 61		    .text "[Press a key]"
>0bf5	20 6b 65 79 5d
>0bfa	00				    .byte 0
>0bfb	01				    .byte 1
>0bfc	1b 5b 32 4a			    .text 27,"[2J"
>0c00	1b 5b 48			    .text 27,"[H"
>0c03	24 30 37 20 42 45 4c 4c		    .text "$07 BELL: Play a tone",$0d,$0a
>0c0b	3a 20 50 6c 61 79 20 61 20 74 6f 6e 65 0d 0a
>0c1a	07 44 69 6e 67 20 5b 50		    .text $07,"Ding [Pass if you heard a 'ding' sound.]",$0d,$0a
>0c22	61 73 73 20 69 66 20 79 6f 75 20 68 65 61 72 64
>0c32	20 61 20 27 64 69 6e 67 27 20 73 6f 75 6e 64 2e
>0c42	5d 0d 0a
>0c45	0a 0a				    .byte $0a,$0a
>0c47	00				    .byte 0
>0c48	24 30 38 20 42 53 3a 20		    .text "$08 BS: Backspace",$0d,$0a
>0c50	42 61 63 6b 73 70 61 63 65 0d 0a
>0c5b	42 61 63 6b 73 70 61 63		    .text "Backspace test [should say 'pass' twice]: failpass"
>0c63	65 20 74 65 73 74 20 5b 73 68 6f 75 6c 64 20 73
>0c73	61 79 20 27 70 61 73 73 27 20 74 77 69 63 65 5d
>0c83	3a 20 66 61 69 6c 70 61 73 73
>0c8d	08 08 08 08 08 08 08 08		    .text $08,$08,$08,$08,$08,$08,$08,$08,"pass",$0d,$0a
>0c95	70 61 73 73 0d 0a
>0c9b	0a 0a				    .byte $0a,$0a
>0c9d	00				    .byte 0
>0c9e	24 30 39 20 48 54 3a 20		    .text "$09 HT: Horizontal tab",$0d,$0a
>0ca6	48 6f 72 69 7a 6f 6e 74 61 6c 20 74 61 62 0d 0a
>0cb6	20 20 20 20 20 20 20 20		    .text "         |         |         |         |",$0d,$0a
>0cbe	20 7c 20 20 20 20 20 20 20 20 20 7c 20 20 20 20
>0cce	20 20 20 20 20 7c 20 20 20 20 20 20 20 20 20 7c
>0cde	0d 0a
>0ce0	62 61 72 73 09 7c 73 68		    .text "bars",9,"|should",9,"|line",9,"|up",9,"|",$0d,$0a
>0ce8	6f 75 6c 64 09 7c 6c 69 6e 65 09 7c 75 70 09 7c
>0cf8	0d 0a
>0cfa	0a 0a				    .byte $0a,$0a
>0cfc	00				    .byte 0
>0cfd	43 6f 6e 74 72 6f 6c 20		    .text "Control character test",$0d,$0a,$0a
>0d05	63 68 61 72 61 63 74 65 72 20 74 65 73 74 0d 0a
>0d15	0a
>0d16	24 31 30 20 4c 46 3a 20		    .text "$10 LF: moves the cursor down one line",$0d,$0a
>0d1e	6d 6f 76 65 73 20 74 68 65 20 63 75 72 73 6f 72
>0d2e	20 64 6f 77 6e 20 6f 6e 65 20 6c 69 6e 65 0d 0a
>0d3e	4c 69 6e 65 20 31 20 5c		    .text "Line 1 ",$5C,$0a
>0d46	0a
>0d47	5c 20 4c 69 6e 65 20 32		    .text         $5C," Line 2",$0d,$0a
>0d4f	0d 0a
>0d51	54 68 65 20 62 61 63 6b		    .text "The backslashes should line up."
>0d59	73 6c 61 73 68 65 73 20 73 68 6f 75 6c 64 20 6c
>0d69	69 6e 65 20 75 70 2e
>0d70	0d 0a 0a			    .text $0d,$0a,$0a
>0d73	00				    .byte 0
>0d74	24 31 33 20 43 52 3a 20		    .text "$13 CR: move to start of line",$0d,$0a,$0a
>0d7c	6d 6f 76 65 20 74 6f 20 73 74 61 72 74 20 6f 66
>0d8c	20 6c 69 6e 65 0d 0a 0a
>0d94	20 20 20 20 20 20 20 20		    .text "          <- CR TEST [should be on same line]",$0d
>0d9c	20 20 3c 2d 20 43 52 20 54 45 53 54 20 5b 73 68
>0dac	6f 75 6c 64 20 62 65 20 6f 6e 20 73 61 6d 65 20
>0dbc	6c 69 6e 65 5d 0d
>0dc2	43 52 20 54 45 53 54 20		    .text "CR TEST ->",$0D,$0A
>0dca	2d 3e 0d 0a
>0dce	0a 0a				    .byte $0a,$0a
>0dd0	00				    .byte 0
>0dd1	01				    .byte 1
>0dd2	1b 5b 48 c5 20 48 4f 4d		    .text 27,"[H",$c5," HOME POSITION",$0D,$0A
>0dda	45 20 50 4f 53 49 54 49 4f 4e 0d 0a
>0de6	00 01				    .byte 0,1
>0de8	1b 5b 32 30 3b 34 30 48		    .text 27,"[20;40H",$c5," Row 20 Col 40",$0d,$0a
>0df0	c5 20 52 6f 77 20 32 30 20 43 6f 6c 20 34 30 0d
>0e00	0a
>0e01	00 01				    .byte 0,1
>0e03	1b 5b 36 30 3b 38 30 48		    .text 27,"[60;80H",$c5
>0e0b	c5
>0e0c	1b 5b 36 30 3b 36 35 48		    .text 27,"[60;65HRow 60 Col 80"
>0e14	52 6f 77 20 36 30 20 43 6f 6c 20 38 30
>0e21	00 01				    .byte 0,1
>0e23	1b 5b 34 3b 35 48 c5 20		    .text 27,"[4;5H",$c5," Row 4 Col 5",$0d,$0a
>0e2b	52 6f 77 20 34 20 43 6f 6c 20 35 0d 0a
>0e38	00 01				    .byte 0,1
>0e3a	1b 5b 31 30 48 2b 20 4c		    .text 27,"[10H+ Line 10, column 1 (no column)"
>0e42	69 6e 65 20 31 30 2c 20 63 6f 6c 75 6d 6e 20 31
>0e52	20 28 6e 6f 20 63 6f 6c 75 6d 6e 29
>0e5e	00 01				    .byte 0,1
>0e60	1b 5b 3b 34 30 48 2b 20		    .text 27,"[;40H+ Col 40 (no row)  "
>0e68	43 6f 6c 20 34 30 20 28 6e 6f 20 72 6f 77 29 20
>0e78	20
>0e79	00				    .byte 0
>0e7a	1b 5b 32 4a 1b 5b 48		    .text 27,"[2J",27,"[H"
>0e81	1b 5b 32 3b 36 35 48 4e		    .text 27,"[2;65HNo-wrap test. -[Not visible]>"
>0e89	6f 2d 77 72 61 70 20 74 65 73 74 2e 20 2d 5b 4e
>0e99	6f 74 20 76 69 73 69 62 6c 65 5d 3e
>0ea5	1b 5b 33 48 4e 6f 2d 57		    .text 27,"[3HNo-Wrap test: > char should be on",$0d,$0A
>0ead	72 61 70 20 74 65 73 74 3a 20 3e 20 63 68 61 72
>0ebd	20 73 68 6f 75 6c 64 20 62 65 20 6f 6e 0d 0a
>0ecc	72 69 67 68 74 20 65 64		    .text "right edge and [Not visible] should not",$0d,$0a
>0ed4	67 65 20 61 6e 64 20 5b 4e 6f 74 20 76 69 73 69
>0ee4	62 6c 65 5d 20 73 68 6f 75 6c 64 20 6e 6f 74 0d
>0ef4	0a
>0ef5	62 65 20 76 69 73 69 62		    .text "be visible.",$0d,$0a
>0efd	6c 65 2e 0d 0a
>0f02	00				    .byte 0
>0f03	1b 5b 32 4a			    .text 27,"[2J"
>0f07	1b 5b 48			    .text 27,"[H"
>0f0a	1b 42 61 64 20 65 73 63		    .text 27,"Bad escape code tests:",$0d,$0a
>0f12	61 70 65 20 63 6f 64 65 20 74 65 73 74 73 3a 0d
>0f22	0a
>0f23	1b 48 20 6d 69 73 73 69		    .text 27,"H missing [ in escape code",$0d,$0a
>0f2b	6e 67 20 5b 20 69 6e 20 65 73 63 61 70 65 20 63
>0f3b	6f 64 65 0d 0a
>0f40	1b 5b 5a 20 69 6e 76 61		    .text 27,"[Z invalid command in escape code",$0d,$0a
>0f48	6c 69 64 20 63 6f 6d 6d 61 6e 64 20 69 6e 20 65
>0f58	73 63 61 70 65 20 63 6f 64 65 0d 0a
>0f64	00				    .byte 0
>0f65	01				    .byte 1
>0f66	1b 5b 32 30 3b 32 30 48		    .text 27,"[20;20H"
>0f6e	45 44 20 20 63 75 72 73		    .text "ED  cursor to end ->"
>0f76	6f 72 20 74 6f 20 65 6e 64 20 2d 3e
>0f82	1b 5b 32 30 3b 34 30 48		    .text 27,"[20;40H"
>0f8a	5b 54 68 69 73 20 74 65		    .text "[This text should disappear]"
>0f92	78 74 20 73 68 6f 75 6c 64 20 64 69 73 61 70 70
>0fa2	65 61 72 5d
>0fa6	00				    .byte 0
>0fa7	1b 5b 32 30 3b 34 30 48		    .text 27,"[20;40H"
>0faf	1b 5b 30 4a			    .text 27,"[0J"
>0fb3	00				    .byte 0
>0fb4	01				    .byte 1
>0fb5	1b 5b 32 30 3b 31 37 48		    .text 27,"[20;17H"
>0fbd	5b 54 68 69 73 20 73 68		    .text "[This should disappear]"
>0fc5	6f 75 6c 64 20 64 69 73 61 70 70 65 61 72 5d
>0fd4	1b 5b 32 30 3b 34 30 48		    .text 27,"[20;40H"
>0fdc	3c 2d 20 45 44 20 73 74		    .text "<- ED start to cursor",$0D,$0A
>0fe4	61 72 74 20 74 6f 20 63 75 72 73 6f 72 0d 0a
>0ff3	1b 5b 36 30 3b 35 34 48		    .text 27,"[60;54H"
>0ffb	54 68 69 73 20 73 68 6f		    .text "This should remain visible."
>1003	75 6c 64 20 72 65 6d 61 69 6e 20 76 69 73 69 62
>1013	6c 65 2e
>1016	00				    .byte 0
>1017	1b 5b 32 30 3b 33 39 48		    .text 27,"[20;39H"
>101f	1b 5b 31 4a			    .text 27,"[1J"
>1023	00				    .byte 0
>1024	1b 5b 32 4a			    .text 27,"[2J"
>1028	1b 5b 31 30 3b 32 37 48		    .text 27,"[10;27H   Erase full screen"
>1030	20 20 20 45 72 61 73 65 20 66 75 6c 6c 20 73 63
>1040	72 65 65 6e
>1044	1b 5b 31 31 3b 32 37 48		    .text 27,"[11;27H Screen should be clear"
>104c	20 53 63 72 65 65 6e 20 73 68 6f 75 6c 64 20 62
>105c	65 20 63 6c 65 61 72
>1063	1b 5b 31 32 3b 32 37 48		    .text 27,"[12;27H[Aside from this message]"
>106b	5b 41 73 69 64 65 20 66 72 6f 6d 20 74 68 69 73
>107b	20 6d 65 73 73 61 67 65 5d
>1084	00				    .byte 0
>1085	01				    .byte 1
>1086	1b 5b 32 30 3b 31 30 48		    .text 27,"[20;10H"
>108e	45 4c 20 63 75 72 73 6f		    .text "EL cursor to to end of line ->"
>1096	72 20 74 6f 20 74 6f 20 65 6e 64 20 6f 66 20 6c
>10a6	69 6e 65 20 2d 3e
>10ac	1b 5b 32 30 3b 34 30 48		    .text 27,"[20;40H"
>10b4	5b 54 68 69 73 20 74 65		    .text "[This text should disappear]"
>10bc	78 74 20 73 68 6f 75 6c 64 20 64 69 73 61 70 70
>10cc	65 61 72 5d
>10d0	00				    .byte 0
>10d1	1b 5b 32 30 3b 34 30 48		    .text 27,"[20;40H"
>10d9	1b 5b 30 4b			    .text 27,"[0K"
>10dd	00				    .byte 0
>10de	1b 5b 32 30 3b 31 30 48		    .text 27,"[20;10H"
>10e6	5b 54 68 69 73 20 74 65		    .text "[This text should disappear]"
>10ee	78 74 20 73 68 6f 75 6c 64 20 64 69 73 61 70 70
>10fe	65 61 72 5d
>1102	1b 5b 32 30 3b 34 30 48		    .text 27,"[20;40H"
>110a	5d 3c 2d 20 45 4c 20 73		    .text "]<- EL start to cursor"
>1112	74 61 72 74 20 74 6f 20 63 75 72 73 6f 72
>1120	00				    .byte 0
>1121	1b 5b 32 30 3b 34 30 48		    .text 27,"[20;40H"
>1129	1b 5b 31 4b			    .text 27,"[1K"
>112d	00				    .byte 0
>112e	1b 5b 32 30 48			    .text 27,"[20H"
>1133	2e 2e 2e 2e 2c 2e 2e 2e		    .text "....,....1....,....2....,....3....,....4....,....5....,....6....,....7....,....8"
>113b	2e 31 2e 2e 2e 2e 2c 2e 2e 2e 2e 32 2e 2e 2e 2e
>114b	2c 2e 2e 2e 2e 33 2e 2e 2e 2e 2c 2e 2e 2e 2e 34
>115b	2e 2e 2e 2e 2c 2e 2e 2e 2e 35 2e 2e 2e 2e 2c 2e
>116b	2e 2e 2e 36 2e 2e 2e 2e 2c 2e 2e 2e 2e 37 2e 2e
>117b	2e 2e 2c 2e 2e 2e 2e 38
>1183	1b 5b 32 30 3b 31 38 48		    .text 27,"[20;18H"
>118b	5b 45 4c 20 65 6e 74 69		    .text "[EL entire line. This text should disappear]"
>1193	72 65 20 6c 69 6e 65 2e 20 54 68 69 73 20 74 65
>11a3	78 74 20 73 68 6f 75 6c 64 20 64 69 73 61 70 70
>11b3	65 61 72 5d
>11b7	00				    .byte 0
>11b8	1b 5b 32 30 3b 31 30 48		    .text 27,"[20;10H"
>11c0	1b 5b 32 4b			    .text 27,"[2K"
>11c4	00				    .byte 0
>11c5	01				    .byte 1
>11c6	1b 5b 32 39 3b 32 37 48		    .text 27,"[29;27HPress a key to restart test"
>11ce	50 72 65 73 73 20 61 20 6b 65 79 20 74 6f 20 72
>11de	65 73 74 61 72 74 20 74 65 73 74
>11e9	00				    .byte 0
>11ea	1a 00 00 00 00			    .byte 26,0,0,0,0

;******  Processing file: ANSI_DRIVER.ASM

=$b000					ScrnAdr = $B000  ; Address of screen buffer in VERA
=$9f20					vera_addr0 = $9f20    ; low byte of display address (col)
=$9f21					vera_addr1 = $9f21    ; middle byte of display address (row)
=$9f22					vera_addr2 = $9f22    ; high byte of display address (bank + increment)
=$9f23					vera_data0 = $9f23    ; VERA data port 0
=$9f24					vera_data1 = $9f24    ; VERA data port 1
=$9f25					vera_dcsel = $9f25    ; VERA data select register
=$ff6e					jsrfar = $FF6E
=$00					bank_select_ram = $00
=$01					bank_select_rom = $01
=$0a					bank_audio = $0A
=$c063					ym_init = $C063
=$c003					bas_fmnote = $C003
=$c000					bas_fmfreq = $c000
=$c00f					bas_psgfreq = $c00f
=$c069					ym_loadpatch = $c069
=$02					R0      = $02
=$02					R0L     = $02
=$03					R0H     = $03
=$04					R1      = $04
=$04					R1L     = $04
=$05					R1H     = $05
=$04					R2      = $04
=$04					R2L     = $04
=$05					R2H     = $05
=$02					ansi_strptr   = R0  ; string pointer for prints procedure
.11ef					ansi_init:
.11ef	a9 0f		lda #$0f	    lda #15     ; ISO mode PETSCII character
.11f1	20 d2 ff	jsr $ffd2	    jsr $FFD2   ; print it
.11f4	a9 07		lda #$07	    lda #7
.11f6	20 62 ff	jsr $ff62	    jsr $ff62 ; screen_set_charset
.11f9	20 6e ff	jsr $ff6e	    jsr jsrfar  ; $FF6E
>11fc	63 c0				    .word ym_init ; $C063
>11fe	0a				    .byte bank_audio
.11ff	a2 0d		ldx #$0d	    ldx #$0d
.1201	38		sec		    sec
.1202	20 6e ff	jsr $ff6e	    jsr jsrfar
>1205	69 c0				    .word ym_loadpatch
>1207	0a				    .byte bank_audio
.1208	60		rts		    rts
.1209					locate:
.1209	48		pha		    pha
.120a	20 9d 14	jsr $149d	    jsr csr_blink_off
.120d	8e a4 14	stx $14a4	    stx csr_col
.1210	8c a5 14	sty $14a5	    sty csr_row
.1213	20 18 12	jsr $1218	    jsr load_addr_vector
.1216	68		pla		    pla
.1217	60		rts		    rts
.1218					load_addr_vector:
.1218	9c 25 9f	stz $9f25	    stz vera_dcsel        ; work with data port 0
.121b	ad a4 14	lda $14a4	    lda csr_col
.121e	0a		asl a		    asl A
.121f	8d 20 9f	sta $9f20	    sta vera_addr0
.1222	ad a5 14	lda $14a5	    lda csr_row
.1225	18		clc		    clc
.1226	6d a7 14	adc $14a7	    adc csr_base
.1229	8d 21 9f	sta $9f21	    sta vera_addr1
.122c	ad a6 14	lda $14a6	    lda csr_bank
.122f	8d 22 9f	sta $9f22	    sta vera_addr2
.1232	60		rts		    rts
.1233					save_addr_vector:
.1233	9c 25 9f	stz $9f25	    stz vera_dcsel        ; work with data port 0
.1236	ad 20 9f	lda $9f20	    lda vera_addr0
.1239	4a		lsr a		    lsr A
.123a	8d a4 14	sta $14a4	    sta csr_col
.123d	ad 21 9f	lda $9f21	    lda vera_addr1
.1240	38		sec		    sec
.1241	ed a7 14	sbc $14a7	    sbc csr_base
.1244	8d a5 14	sta $14a5	    sta csr_row
.1247	60		rts		    rts
.1248					ansi_print_str:
.1248	20 18 12	jsr $1218	    jsr load_addr_vector
.124b					prints_loop:
.124b	b2 02		lda ($02)	    lda (ansi_strptr)
.124d	f0 0b		beq $125a	    beq prints_done
.124f	20 61 12	jsr $1261	    jsr chrout
.1252	e6 02		inc $02		        inc ansi_strptr
.1254	d0 02		bne $1258	        bne +
.1256	e6 03		inc $03		        inc ansi_strptr+1
.1258					    +
.1258	80 f1		bra $124b	    bra prints_loop
.125a					prints_done:
.125a	e6 02		inc $02		        inc ansi_strptr
.125c	d0 02		bne $1260	        bne +
.125e	e6 03		inc $03		        inc ansi_strptr+1
.1260					    +
.1260	60		rts		    rts
.1261					chrout:
.1261	ac ae 14	ldy $14ae	    ldy param_count
.1264	c0 04		cpy #$04	    cpy #cmd_max
.1266	c0 01		cpy #$01	    cpy #1
.1268	f0 78		beq $12e2	    beq chrout_read_param
.126a	90 03		bcc $126f	    bcc +
.126c	4c f2 12	jmp $12f2	    jmp chrout_test_semi
.126f	c9 20		cmp #$20	+   cmp #' '
.1271	90 33		bcc $12a6	    bcc do_control_char
.1273					just_print:
.1273	8d 23 9f	sta $9f23	    sta vera_data0
.1276	ad a8 14	lda $14a8	    lda cur_color   ; get the current color
.1279	8d 23 9f	sta $9f23	    sta vera_data0
.127c	ee a4 14	inc $14a4	    inc csr_col     ; moves cursor to the right one position
.127f					check_bounds:
.127f	ad a4 14	lda $14a4	    lda csr_col
.1282	cd aa 14	cmp $14aa	    cmp col_count
.1285	90 0a		bcc $1291	    bcc check_row
.1287	ad aa 14	lda $14aa	    lda col_count
.128a	3a		dec a		    dec A
.128b	8d a4 14	sta $14a4	    sta csr_col
.128e	20 18 12	jsr $1218	    jsr load_addr_vector
.1291					check_row:
.1291	ad a5 14	lda $14a5	    lda csr_row
.1294	cd ab 14	cmp $14ab	    cmp row_count
.1297	90 0c		bcc $12a5	    bcc check_done
.1299	ad a5 14	lda $14a5	    lda csr_row
.129c	38		sec		    sec
.129d	e9 01		sbc #$01	    sbc #$01
.129f	8d a5 14	sta $14a5	    sta csr_row
.12a2	20 18 12	jsr $1218	    jsr load_addr_vector
.12a5					check_done:
.12a5					chrout_done:
.12a5	60		rts		    rts
.12a6					do_control_char:
.12a6	c9 1b		cmp #$1b	    cmp #$1B ; ESC
.12a8	d0 06		bne $12b0	    bne +
.12aa	ee ae 14	inc $14ae	    inc param_count
.12ad	4c a5 12	jmp $12a5	    jmp chrout_done
.12b0	c9 0a		cmp #$0a	+   cmp #$0A ; Line Feed
.12b2	d0 09		bne $12bd	    bne +
.12b4	ee a5 14	inc $14a5	    inc csr_row
.12b7	20 18 12	jsr $1218	    jsr load_addr_vector
.12ba	4c 7f 12	jmp $127f	    jmp check_bounds
.12bd	c9 0d		cmp #$0d	+   cmp #$0D ;CR
.12bf	d0 09		bne $12ca	    bne +
.12c1	9c a4 14	stz $14a4	    stz csr_col
.12c4	20 18 12	jsr $1218	    jsr load_addr_vector
.12c7	4c 7f 12	jmp $127f	    jmp check_bounds
.12ca	c9 07		cmp #$07	+   cmp #$07 ; bell
.12cc	d0 03		bne $12d1	    bne +
.12ce	4c 54 14	jmp $1454	    jmp do_bell
.12d1	c9 08		cmp #$08	+   cmp #$08 ; backspace
.12d3	d0 03		bne $12d8	    bne +
.12d5	4c 68 14	jmp $1468	    jmp do_bs
.12d8	c9 09		cmp #$09	+   cmp #$09 ; tab
.12da	d0 03		bne $12df	    bne +
.12dc	4c 77 14	jmp $1477	    jmp do_tab
.12df	4c 73 12	jmp $1273	+   jmp just_print
.12e2					chrout_read_param:
.12e2	c9 5b		cmp #$5b	    cmp #'['
.12e4	d0 06		bne $12ec	    bne +
.12e6	ee ae 14	inc $14ae	    inc param_count
.12e9	4c a5 12	jmp $12a5	    jmp chrout_done
.12ec					+
.12ec	9c ae 14	stz $14ae	    stz param_count
.12ef	4c 73 12	jmp $1273	    jmp just_print
.12f2					chrout_test_semi:
.12f2	c9 3b		cmp #$3b	    cmp #';'
.12f4	d0 08		bne $12fe	    bne chrout_test_number
.12f6	a9 03		lda #$03	    lda #$03
.12f8	8d ae 14	sta $14ae	    sta param_count
.12fb	4c a5 12	jmp $12a5	    jmp chrout_done
.12fe					chrout_test_number:
.12fe	c9 30		cmp #$30	    cmp #'0'
.1300	90 24		bcc $1326	    bcc chrout_not_number
.1302	c9 3a		cmp #$3a	    cmp #'9'+1
.1304	b0 20		bcs $1326	    bcs chrout_not_number
.1306	38		sec		    sec
.1307	e9 30		sbc #$30	    sbc #'0'
.1309	8d b2 14	sta $14b2	    sta digit_1
.130c	b9 ae 14	lda $14ae,y	    lda param_count,Y
.130f	0a		asl a		    asl
.1310	0a		asl a		    asl
.1311	0a		asl a		    asl
.1312	8d b7 14	sta $14b7	    sta mult_1
.1315	b9 ae 14	lda $14ae,y	    lda param_count,Y
.1318	0a		asl a		    asl
.1319	18		clc		    clc
.131a	6d b7 14	adc $14b7	    adc mult_1
.131d	6d b2 14	adc $14b2	    adc digit_1
.1320	99 ae 14	sta $14ae,y	    sta param_count,Y
.1323	4c a5 12	jmp $12a5	    jmp chrout_done
.1326					chrout_not_number:
.1326	4c 29 13	jmp $1329	    jmp do_CSI
.1329					do_CSI:
.1329	c9 48		cmp #$48	    cmp #'H'
.132b	f0 0f		beq $133c	    beq do_CUP
.132d	c9 66		cmp #$66	    cmp #'f'
.132f	f0 0b		beq $133c	    beq do_CUP
.1331	c9 4a		cmp #$4a	    cmp #'J'
.1333	f0 72		beq $13a7	    beq do_ED
.1335	c9 4b		cmp #$4b	    cmp #'K'
.1337	f0 15		beq $134e	    beq do_EL
.1339	4c 8e 14	jmp $148e	    jmp cmd_done
.133c					do_CUP:
.133c	ae b1 14	ldx $14b1	    ldx param_2
.133f	f0 01		beq $1342	    beq +
.1341	ca		dex		    dex
.1342	ac b0 14	ldy $14b0	+   ldy param_1
.1345	f0 01		beq $1348	    beq +
.1347	88		dey		    dey
.1348	20 09 12	jsr $1209	+   jsr locate
.134b	4c 8e 14	jmp $148e	    jmp cmd_done
.134e					do_EL:
.134e	ad b0 14	lda $14b0	    lda param_1
.1351	d0 1c		bne $136f	    bne +
.1353	ad a4 14	lda $14a4	    lda csr_col
.1356	8d b3 14	sta $14b3	    sta start_col
.1359	ad a5 14	lda $14a5	    lda csr_row
.135c	8d b4 14	sta $14b4	    sta start_row
.135f	ad aa 14	lda $14aa	    lda col_count
.1362	3a		dec a		    dec a
.1363	8d b5 14	sta $14b5	    sta end_col
.1366	ad a5 14	lda $14a5	    lda csr_row
.1369	8d b6 14	sta $14b6	    sta end_row
.136c	4c ff 13	jmp $13ff	    jmp do_erase
.136f	c9 01		cmp #$01	+   cmp #1
.1371	d0 18		bne $138b	    bne +
.1373	9c b3 14	stz $14b3	    stz start_col
.1376	ad a5 14	lda $14a5	    lda csr_row
.1379	8d b4 14	sta $14b4	    sta start_row
.137c	ad a4 14	lda $14a4	    lda csr_col
.137f	8d b5 14	sta $14b5	    sta end_col
.1382	ad a5 14	lda $14a5	    lda csr_row
.1385	8d b6 14	sta $14b6	    sta end_row
.1388	4c ff 13	jmp $13ff	    jmp do_erase
.138b	c9 02		cmp #$02	+   cmp #2
.138d	d0 39		bne $13c8	    bne +
.138f	9c b3 14	stz $14b3	    stz start_col
.1392	ad a5 14	lda $14a5	    lda csr_row
.1395	8d b4 14	sta $14b4	    sta start_row
.1398	ad aa 14	lda $14aa	    lda col_count
.139b	8d b5 14	sta $14b5	    sta end_col
.139e	ad a5 14	lda $14a5	    lda csr_row
.13a1	8d b6 14	sta $14b6	    sta end_row
.13a4	4c ff 13	jmp $13ff	    jmp do_erase
.13a7					do_ED:
.13a7	ad b0 14	lda $14b0	    lda param_1
.13aa	d0 1c		bne $13c8	    bne +
.13ac	ad a4 14	lda $14a4	    lda csr_col
.13af	8d b3 14	sta $14b3	    sta start_col
.13b2	ad a5 14	lda $14a5	    lda csr_row
.13b5	8d b4 14	sta $14b4	    sta start_row
.13b8	ad aa 14	lda $14aa	    lda col_count
.13bb	8d b5 14	sta $14b5	    sta end_col
.13be	ad ab 14	lda $14ab	    lda row_count
.13c1	3a		dec a		    dec a
.13c2	8d b6 14	sta $14b6	    sta end_row
.13c5	4c ff 13	jmp $13ff	    jmp do_erase
.13c8	c9 01		cmp #$01	+   cmp #1
.13ca	d0 15		bne $13e1	    bne +
.13cc	9c b3 14	stz $14b3	    stz start_col
.13cf	9c b4 14	stz $14b4	    stz start_row
.13d2	ad a4 14	lda $14a4	    lda csr_col
.13d5	8d b5 14	sta $14b5	    sta end_col
.13d8	ad a5 14	lda $14a5	    lda csr_row
.13db	8d b6 14	sta $14b6	    sta end_row
.13de	4c ff 13	jmp $13ff	    jmp do_erase
.13e1	c9 02		cmp #$02	+   cmp #2
.13e3	d0 17		bne $13fc	    bne +
.13e5					ansi_cls:
.13e5	9c b3 14	stz $14b3	    stz start_col
.13e8	9c b4 14	stz $14b4	    stz start_row
.13eb	ad aa 14	lda $14aa	    lda col_count
.13ee	3a		dec a		    dec a
.13ef	8d b5 14	sta $14b5	    sta end_col
.13f2	ad ab 14	lda $14ab	    lda row_count
.13f5	3a		dec a		    dec a
.13f6	8d b6 14	sta $14b6	    sta end_row
.13f9	4c ff 13	jmp $13ff	    jmp do_erase
.13fc	4c 8e 14	jmp $148e	+   jmp cmd_done
.13ff					do_erase:
.13ff	ae a9 14	ldx $14a9	    ldx cur_char
.1402	ac a8 14	ldy $14a8	    ldy cur_color
.1405					erase_first_line:
.1405	9c 25 9f	stz $9f25	    stz vera_dcsel
.1408	ad b3 14	lda $14b3	    lda start_col
.140b	0a		asl a		    asl
.140c	8d 20 9f	sta $9f20	    sta vera_addr0
.140f	ad b4 14	lda $14b4	    lda work_row
.1412	18		clc		    clc
.1413	6d a7 14	adc $14a7	    adc csr_base
.1416	8d 21 9f	sta $9f21	    sta vera_addr1
.1419	ad a6 14	lda $14a6	    lda csr_bank
.141c	8d 22 9f	sta $9f22	    sta vera_addr2
.141f	ad b5 14	lda $14b5	    lda end_col     ; number of rows to clear
.1422	38		sec		    sec
.1423	ed b3 14	sbc $14b3	    sbc start_col
.1426	1a		inc a		    inc a
.1427					erase_fill_line:
.1427	8e 23 9f	stx $9f23	    stx vera_data0
.142a	8c 23 9f	sty $9f23	    sty vera_data0
.142d	3a		dec a		    dec a
.142e	d0 f7		bne $1427	    bne erase_fill_line
.1430	20 8a 14	jsr $148a	    jsr do_callback  ; give serial driver the chance to empty the FIFO
.1433	9c 20 9f	stz $9f20	    stz vera_addr0
.1436	ee 21 9f	inc $9f21	    inc vera_addr1
.1439	ee b4 14	inc $14b4	    inc work_row
.143c	ad b4 14	lda $14b4	    lda work_row
.143f	cd b6 14	cmp $14b6	    cmp end_row
.1442	f0 07		beq $144b	    beq erase_last_line
.1444	b0 0b		bcs $1451	    bcs erase_done
.1446	ad aa 14	lda $14aa	    lda col_count ; number of columns to delete
.1449	80 dc		bra $1427	    bra erase_fill_line
.144b					erase_last_line:
.144b	ad b5 14	lda $14b5	    lda end_col ; for Erase Line, only erase up to cursor
.144e	1a		inc a		    inc a
.144f	80 d6		bra $1427	    bra erase_fill_line
.1451					erase_done:
.1451	4c 8e 14	jmp $148e	    jmp cmd_done
.1454					do_bell:
.1454	a9 0a		lda #$0a	    lda #bank_audio
.1456	85 01		sta $01		    sta bank_select_rom
.1458	a9 00		lda #$00	    lda #$00 ; channel 0
.145a	a2 00		ldx #$00	    ldx #$00 ; 512 Hz
.145c	a0 02		ldy #$02	    ldy #$02 ;
.145e	18		clc		    clc
.145f	20 6e ff	jsr $ff6e	    jsr jsrfar  ; $FF6E
>1462	00 c0				    .word bas_fmfreq ; $C063
>1464	0a				    .byte bank_audio
.1465	4c 8e 14	jmp $148e	    jmp cmd_done
.1468					do_bs:
.1468	ad a4 14	lda $14a4	    lda csr_col
.146b	f0 07		beq $1474	    beq +
.146d	3a		dec a		    dec A
.146e	8d a4 14	sta $14a4	    sta csr_col
.1471	20 18 12	jsr $1218	    jsr load_addr_vector
.1474	4c 8e 14	jmp $148e	+   jmp cmd_done
.1477					do_tab:
.1477	ae a4 14	ldx $14a4	    ldx csr_col
.147a	ca		dex		    dex
.147b	e8		inx		-   inx
.147c	bd bc 14	lda $14bc,x	    lda tab_stops,X
.147f	10 fa		bpl $147b	    bpl -
.1481	8e a4 14	stx $14a4	    stx csr_col
.1484	20 18 12	jsr $1218	    jsr load_addr_vector
.1487	4c 8e 14	jmp $148e	    jmp cmd_done
.148a					do_callback:
.148a	6c 3e 15	jmp ($153e)	    jmp (callback_addr)
.148d					empty_callback:
.148d	60		rts		    RTS
.148e					cmd_done:
.148e	9c ae 14	stz $14ae	    stz param_count
.1491	9c af 14	stz $14af	    stz param_0
.1494	9c b0 14	stz $14b0	    stz param_1
.1497	9c b1 14	stz $14b1	    stz param_2
.149a	4c a5 12	jmp $12a5	    jmp chrout_done
.149d					csr_blink_off:
.149d	60		rts		    rts
.149e					csr_blink_on:
.149e	60		rts		    rts
.149f					csr_blink:
.149f	60		rts		    rts
.14a0					csr_blink_reset:
.14a0	60		rts		    rts
.14a1					csr_blink_wait:
.14a1	60		rts		    rts
.14a2					csr_hide:
.14a2	60		rts		    rts
.14a3					csr_show:
.14a3	60		rts		    rts
>14a4	00				csr_col:       .byte $00  ; column number (addr bits 0-7)
>14a5	00				csr_row:       .byte $00  ; row number (addr bits 8-15)
>14a6	11				csr_bank:       .byte $11 ; auto-increment and addr bit 16.
>14a7	b0				csr_base:      .byte $b0  ; base address of screen buffer
>14a8	01				cur_color:      .byte $01 ; currrent color attribute
>14a9	20				cur_char:       .byte ' ' ; fill character for clear screen
>14aa	50				col_count:    .byte 80 ; default screen width
>14ab	3c				row_count:    .byte 60 ; default screen height
>14ac	00				bank_rom_save:  .byte 0 ; perserve the current ROM bank
>14ad	00				bank_ram_save:  .byte 0 ; preserve the current RAM bank
=4					cmd_max = 4
>14ae	00				param_count .byte 0     ; >0 if parsing a terminal sequence
>14af	00				param_0     .byte 0     ; [ or pain non-CSI command
>14b0	00				param_1     .byte 0     ; first parameter in CSI
>14b1	00				param_2     .byte 0     ; second parameter in CSI
>14b2	00				digit_1     .byte 0     ; character being processed
.14b3					incr_col:
.14b3					start_col:
>14b3	00				work_col:     .byte 0  ; current col for erase/scroll (0-79)
.14b4					start_row:
>14b4	00				work_row:     .byte 0  ; current row for erase/scroll (0-59)
>14b5	00				end_col:      .byte 0  ; end col for erase/scroll (0-79)
>14b6	00				end_row:      .byte 0  ; end row for erase/scroll (0-59)
>14b7	00				mult_1:       .byte 0   ; temp slot for multiplication
>14b8	00				mult_2:       .byte 0   ; temp slot for multiplication
>14b9	00 00				cbs_next:   .word 0     ; the next time the cursor should blink
>14bb	00				cbs_blink:  .byte 0     ; Bitmask
>14bc	00 00 00 00 00 00 00 00		tab_stops:  .byte 0,0,0,0,0,0,0,0,0,$80
>14c4	00 80
>14c6	00 00 00 00 00 00 00 00		            .byte 0,0,0,0,0,0,0,0,0,$80
>14ce	00 80
>14d0	00 00 00 00 00 00 00 00		            .byte 0,0,0,0,0,0,0,0,0,$80
>14d8	00 80
>14da	00 00 00 00 00 00 00 00		            .byte 0,0,0,0,0,0,0,0,0,$80
>14e2	00 80
>14e4	00 00 00 00 00 00 00 00		            .byte 0,0,0,0,0,0,0,0,0,$80
>14ec	00 80
>14ee	00 00 00 00 00 00 00 00		            .byte 0,0,0,0,0,0,0,0,0,$80
>14f6	00 80
>14f8	00 00 00 00 00 00 00 00		            .byte 0,0,0,0,0,0,0,0,0,$80
>1500	00 80
>1502	00 00 00 00 00 00 00 00		            .byte 0,0,0,0,0,0,0,0,0,$80
>150a	00 80
>150c	00 00 00 00 00 00 00 00		            .byte 0,0,0,0,0,0,0,0,0,$80
>1514	00 80
>1516	00 00 00 00 00 00 00 00		            .byte 0,0,0,0,0,0,0,0,0,$80
>151e	00 80
>1520	00 00 00 00 00 00 00 00		            .byte 0,0,0,0,0,0,0,0,0,$80
>1528	00 80
>152a	00 00 00 00 00 00 00 00		            .byte 0,0,0,0,0,0,0,0,0,$80
>1532	00 80
>1534	00 00 00 00 00 00 00 00		            .byte 0,0,0,0,0,0,0,0,  $FF,$FF
>153c	ff ff
.153e					callback_addr:
>153e	8d 14				            .word empty_callback

;******  Return to file: ANSI.ASM


;******  End of listing
